<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GFX Design Order Form</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* General Gallery Styles */
    .gallery {
      display: grid;
      gap: 10px;
      margin-top: 20px;
    }

    .gallery-wrapper {
      position: relative;
    }

    .gallery img {
      width: 100%;
      height: auto;
      border-radius: 5px;
      cursor: pointer;
      transition: transform 0.2s ease-in-out;
      border: 3px solid transparent;
    }

    .gallery img:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .checkbox {
      position: absolute;
      top: 5px;
      right: 5px;
      width: 20px;
      height: 20px;
      border: 2px solid #007bff;
      border-radius: 3px;
      background-color: transparent;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      color: white;
      pointer-events: none; /* Prevent checkbox from interfering with image click */
    }

    .gallery-wrapper.selected .checkbox {
      background-color: #007bff; /* Filled in when selected */
    }

    /* Specific Styles for Banners (3 per row) */
    #banners-gallery {
      grid-template-columns: repeat(3, 1fr); /* 3 banners per row */
    }

    /* Specific Styles for Logos (5 per row) */
    #logos-gallery {
      grid-template-columns: repeat(5, 1fr); /* 5 logos per row */
    }

    /* Dynamic Section and Inputs */
    .dynamic-section {
      margin-top: 20px;
    }

    .numeric-input {
      margin-top: 10px;
    }

    .remove-button {
      margin-left: 10px;
      cursor: pointer;
      color: red;
      font-weight: bold;
    }
</style>
</head>
<body>
  <header>
    <h1>GFX Design Order Form</h1>
    <p>Fill out the form below to request your design!</p>
  </header>

  <main>
    <form id="order-form">
      <h2>Choose Your Options</h2>

      <!-- Add/Remove Design Type Dropdowns -->
      <div id="design-types-container">
        <label for="design-type-1">Design Type:</label>
        <select id="design-type-1" name="designType" class="design-type-dropdown" required>
          <option value="banner">Banner</option>
          <option value="logo">Logo</option>
          <option value="calling-card">Calling Card</option>
          <option value="product-box">Product Box</option>
        <option value="N/A">N/A</option>
        </select>
      </div>
      <button type="button" id="add-design-type">Add Design Type</button>
      <button type="button" id="remove-design-type" style="display: none;">Remove Design Type</button>

      <!-- Numeric Input for Product Boxes -->
      <div id="product-box-quantity" class="numeric-input" style="display: none;">
        <label for="box-quantity">Number of Product Boxes:</label>
        <input type="number" id="box-quantity" name="boxQuantity" min="1">
      </div>

      <!-- Package Dropdown -->
      <label for="package">Package:</label>
      <select id="package" name="packageType" required>
        <option value="server">Server Package</option>
        <option value="user">User Package</option>
        <option value="website">Website Package</option>
        <option value="all-in-one">All-in-One Package</option>
        <option value="n/a">N/A</option>
      </select>

      <!-- New Text Input Fields -->
      <label for="brand">Brand:</label>
      <input type="text" id="brand" name="brand" placeholder="Enter your brand">

     <label for="color-1">Primary Color:</label>
<input type="color" id="color-1" name="color1" value="#ff0000"> <!-- Default to red -->

<label for="color-2">Secondary Color:</label>
<input type="color" id="color-2" name="color2" value="#0000ff"> <!-- Default to blue -->

      <label for="slogan">Slogan for Banner:</label>
      <input type="text" id="slogan" name="slogan" placeholder="Enter slogan for banner">

      <label for="links">Links (Discord server, store, etc.):</label>
      <textarea id="links" name="links" placeholder="Enter links"></textarea>

      <label for="extra-info">Extra Information:</label>
      <textarea id="extra-info" name="extraInfo" placeholder="Enter extra details"></textarea>


      <!-- Hidden inputs to store selected images -->
      <input type="hidden" id="selected-banner" name="selectedBanner">
      <input type="hidden" id="selected-logo" name="selectedLogo">

      <button type="submit">Submit</button>
    </form><br>
<center><h1>Pick a reference</h1></center>

    <br>
    <center><h3>Banners</h3></center><!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .centered-line {
      width: 50%; /* Adjust the width of the line as needed */
      height: 2px; /* Thickness of the line */
      background-color: black; /* Color of the line */
      margin: 0 auto; /* Centers the line horizontally */
    }
  </style>
</head>
<body>
  <div class="centered-line"></div>
</body>
</html>
    <div class="gallery" id="banners-gallery"></div>

    <center><h3>Logos</h3></center>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .centered-line {
      width: 50%; /* Adjust the width of the line as needed */
      height: 2px; /* Thickness of the line */
      background-color: black; /* Color of the line */
      margin: 0 auto; /* Centers the line horizontally */
    }
  </style>
</head>
<body>
  <div class="centered-line"></div>
</body>
</html>
    <div class="gallery" id="logos-gallery"></div>
  </main>

  <div class="modal" id="imageModal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img id="modalImage" src="" alt="Expanded Image">
  </div>

  <script>
    const banners = [
  "https://i.ibb.co/XxZ45yJ3/ba8ff1b0f692.gif",
  "https://i.ibb.co/rGvNSXDn/2c23376c9efd.gif",
  "https://i.ibb.co/HLsKKNNn/228673871592.gif",
  "https://i.ibb.co/8g2R1Yt6/6c8e1b4f612e.gif",
  "https://i.ibb.co/wFqC2spn/e96be2ebd5b7.gif",
  "https://i.ibb.co/HLxQW1qD/1f5f5d289360.gif",
  "https://i.ibb.co/bMf4yRzv/8b8a9a4a9f05.gif",
  "https://i.ibb.co/XZXnbRVC/5c6ced02bd5f.gif",
  "https://i.ibb.co/Z6cPkhSG/aa75903a6057.gif",
  "https://i.ibb.co/b5X2YzRF/526116221965.gif",
  "https://i.ibb.co/dwP3BFy6/e198874aa356.gif",
  "https://i.ibb.co/XxvFM82v/7d2760ef52a0.gif",
  "https://i.ibb.co/8D3YTXH6/f12e8615af41.gif",
  "https://i.ibb.co/1cWrXns/8d2a0e0de257.gif",
  "https://i.ibb.co/2Y8md00m/1c5949bd97ae.png",
  "https://i.ibb.co/60ZJhGYV/4158fdd00f5b.gif",
  "https://i.ibb.co/7JS3101R/7e3ca73ee363.gif",
  "https://i.ibb.co/wZHVCx0D/2f24f449c2ad.gif",
  "https://i.ibb.co/zHLLLM4z/e1597436b2ba.gif",
  "https://i.ibb.co/9kvsqkc6/38e9e52c1504.gif",
  "https://i.ibb.co/vCzJXpYr/PROFILE-BANNER.gif",
  "https://i.ibb.co/Z1LWr796/PROFILE-BANNER-2.gif",
  "https://i.ibb.co/QjDnGVJ8/SERVER-BANNER-2.gif",
  "https://i.ibb.co/4g2j34QV/SERVER-BANNER-2-1.gif",
  "https://i.ibb.co/FLyWHQ6z/SERVER-BANNER-3.gif",
  "https://i.ibb.co/ccFXNgMX/SERVER-BANNER-1.gif",
  "https://i.ibb.co/hJ7HJ0r9/SERVER-BANNER-9.gif",
  "https://i.ibb.co/rn3wj2M/SERVER-BANNER-13.gif"
    ];

    const logos = [
 "https://i.ibb.co/v4d5r8Rr/6b08ed7eb902.gif",
  "https://i.ibb.co/rG98h8PT/c693264c012b.gif",
  "https://i.ibb.co/gFQGVzgJ/e6281fb9d1bc.gif",
  "https://i.ibb.co/MDP7KKYy/8c073d0709f9.gif",
  "https://i.ibb.co/fYdH7rwp/be843536889b.gif",
  "https://i.ibb.co/zWqZhFwp/b91c208c731f.gif",
  "https://i.ibb.co/r2w3DRNh/f23100288111.gif",
  "https://i.ibb.co/bjmkjLCg/00270c10c45d.gif",
  "https://i.ibb.co/CspVp2v9/d353a32e2eb3.gif",
  "https://i.ibb.co/ycmCRCd8/971a16da24de.gif",
  "https://i.ibb.co/sdzMdR03/55bc773e1c28.gif",
  "https://i.ibb.co/7JMPjkjH/f289f980ff42.gif",
  "https://i.ibb.co/p6zd1p07/288406e64c24.gif",
  "https://i.ibb.co/PGNnMPk6/20444a3742e2.gif",
  "https://i.ibb.co/Z6mjL3br/8ba4d71fe293.gif",
  "https://i.ibb.co/DDMzFQKW/488ea99f0e06.gif",
  "https://i.ibb.co/wZjQxmhK/be79348ecd53.gif",
  "https://i.ibb.co/q32wQCXz/c015ce5c4277.gif",
  "https://i.ibb.co/39vfg9Q1/8b281345f146.gif",
  "https://i.ibb.co/Swx9WqpH/f9ca53a6e497.gif",
  "https://i.ibb.co/d0mQHYDL/323c0aa6eaec.gif",
  "https://i.ibb.co/RmG5xxq/eb1bfd079b10.gif",
  "https://i.ibb.co/217DbcjN/769887bd44a0.gif",
  "https://i.ibb.co/prxjMKJY/ee0e6da20222.gif",
  "https://i.ibb.co/ccJ4DGcc/6e6fdadf85ce.gif"
    ];

    const bannersGallery = document.getElementById("banners-gallery");
    const logosGallery = document.getElementById("logos-gallery");
    const selectedBannerInput = document.getElementById("selected-banner");
    const selectedLogoInput = document.getElementById("selected-logo");

    let selectedBanner = null;
    let selectedLogo = null;

    function selectImage(type, wrapperElement, src) {
      if (type === "banner") {
        // Deselect previously selected banner
        if (selectedBanner) selectedBanner.classList.remove("selected");
        selectedBanner = wrapperElement;
        selectedBannerInput.value = src; // Update hidden input
      } else if (type === "logo") {
        // Deselect previously selected logo
        if (selectedLogo) selectedLogo.classList.remove("selected");
        selectedLogo = wrapperElement;
        selectedLogoInput.value = src; // Update hidden input
      }
      wrapperElement.classList.add("selected");
    }
const designTypesContainer = document.getElementById("design-types-container");
const addDesignTypeButton = document.getElementById("add-design-type");
const removeDesignTypeButton = document.getElementById("remove-design-type");
const productBoxQuantity = document.getElementById("product-box-quantity");

let designTypeCount = 1;

// Add a new Design Type dropdown
addDesignTypeButton.addEventListener("click", () => {
  designTypeCount++;

  const newDropdown = document.createElement("div");
  newDropdown.id = `design-type-${designTypeCount}`;
  newDropdown.classList.add("dynamic-section");
  newDropdown.innerHTML = `
    <label for="design-type-${designTypeCount}">Design Type:</label>
    <select id="design-type-${designTypeCount}" name="designType" class="design-type-dropdown" required>
      <option value="banner">Banner</option>
      <option value="logo">Logo</option>
      <option value="calling-card">Calling Card</option>
      <option value="product-box">Product Box</option>
    </select>
  `;
  designTypesContainer.appendChild(newDropdown);

  // Show the remove button when there's more than one dropdown
  if (designTypeCount > 1) {
    removeDesignTypeButton.style.display = "inline-block";
  }

  // Add change event listener for the new dropdown
  newDropdown.querySelector(".design-type-dropdown").addEventListener("change", handleDesignTypeChange);
});

// Remove the last Design Type dropdown
removeDesignTypeButton.addEventListener("click", () => {
  if (designTypeCount > 1) {
    document.getElementById(`design-type-${designTypeCount}`).remove();
    designTypeCount--;

    // Hide the remove button if there's only one dropdown left
    if (designTypeCount === 1) {
      removeDesignTypeButton.style.display = "none";
    }

    // Recheck if "Product Box" is still selected after removal
    handleDesignTypeChange();
  }
});

// Handle Design Type dropdown change
function handleDesignTypeChange() {
  // Get all design type dropdowns
  const designTypeDropdowns = document.querySelectorAll(".design-type-dropdown");

  // Check if at least one dropdown is set to "Product Box"
  const hasProductBox = Array.from(designTypeDropdowns).some(
    (dropdown) => dropdown.value === "product-box"
  );

  // Show or hide the numeric input based on the presence of "Product Box"
  if (hasProductBox) {
    productBoxQuantity.style.display = "block";
  } else {
    productBoxQuantity.style.display = "none";
  }
}

// Add change event listener for the initial Design Type dropdown
document.querySelector(".design-type-dropdown").addEventListener("change", handleDesignTypeChange);


// Populate Banner Gallery
banners.forEach((src, index) => {
  const wrapper = document.createElement("div");
  wrapper.classList.add("gallery-wrapper");

  const img = document.createElement("img");
  img.src = src;
  img.alt = `Banner ${index + 1}`;
  img.className = "banner-img"; // Add a class for banners
  img.addEventListener("click", () => selectImage("banner", wrapper, src));

  const checkbox = document.createElement("div");
  checkbox.classList.add("checkbox");

  wrapper.appendChild(img);
  wrapper.appendChild(checkbox);
  bannersGallery.appendChild(wrapper);
});

// Populate Logo Gallery
logos.forEach((src, index) => {
  const wrapper = document.createElement("div");
  wrapper.classList.add("gallery-wrapper");

  const img = document.createElement("img");
  img.src = src;
  img.alt = `Logo ${index + 1}`;
  img.className = "logo-img"; // Add a class for logos
  img.addEventListener("click", () => selectImage("logo", wrapper, src));

  const checkbox = document.createElement("div");
  checkbox.classList.add("checkbox");

  wrapper.appendChild(img);
  wrapper.appendChild(checkbox);
  logosGallery.appendChild(wrapper);
});
// Reset Form On Refresh
  window.addEventListener("load", () => {
  document.getElementById("order-form").reset(); // Reset the form to its default state
});
    // Populate Logo Gallery
    logos.forEach((src, index) => {
      const wrapper = document.createElement("div");
      wrapper.classList.add("gallery-wrapper");

      const img = document.createElement("img");
      img.src = src;
      img.alt = `Logo ${index + 1}`;
      img.addEventListener("click", () => selectImage("logo", wrapper, src));

      const checkbox = document.createElement("div");
      checkbox.classList.add("checkbox");

      wrapper.appendChild(img);
      wrapper.appendChild(checkbox);
      logosGallery.appendChild(wrapper);
    });
// Add this logic to dynamically handle product box fields
const productBoxQuantityInput = document.getElementById("box-quantity");
const productsContainer = document.createElement("div");
productsContainer.id = "products-container";
productsContainer.style.marginTop = "20px";

// Insert the products container just above the submit button
const submitButton = document.querySelector("button[type='submit']");
if (submitButton) {
  submitButton.insertAdjacentElement("beforebegin", productsContainer);
}

// Function to update product fields based on product box quantity
function updateProductFields(event) {
  // Prevent the form from submitting (if this was the cause)
  event.preventDefault();

  const quantity = parseInt(productBoxQuantityInput.value, 10) || 0; // Get the value, default to 0
  const currentFields = productsContainer.querySelectorAll(".product-field").length;

  // If the quantity is greater, add fields
  if (quantity > currentFields) {
    for (let i = currentFields + 1; i <= quantity; i++) {
      const productFieldWrapper = document.createElement("div");
      productFieldWrapper.id = `product-${i}`;
      productFieldWrapper.classList.add("product-field");
      productFieldWrapper.style.marginBottom = "10px";

      productFieldWrapper.innerHTML = `
        <label for="product-${i}-name">Product ${i}:</label>
        <input type="text" id="product-${i}-name" name="products[]" placeholder="Enter product name">
      `;

      productsContainer.appendChild(productFieldWrapper);
    }
  }

  // If the quantity is smaller, remove extra fields
  if (quantity < currentFields) {
    for (let i = currentFields; i > quantity; i--) {
      const fieldToRemove = document.getElementById(`product-${i}`);
      if (fieldToRemove) {
        fieldToRemove.remove();
      }
    }
  }
}

// Attach event listener to update product fields in real time
// Use "input" to detect changes and ensure it doesn't trigger submit
productBoxQuantityInput.addEventListener("input", (event) => {
  event.preventDefault(); // Prevent form submission
  updateProductFields(event);
});

// Order Form Submission
document.getElementById("order-form").addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(e.target);

    // Collect the two color scheme values
    const primaryColor = formData.get("color1");
    const secondaryColor = formData.get("color2");

    // Collect all design types from the dropdowns
    const designTypeDropdowns = document.querySelectorAll(".design-type-dropdown");
    const designTypes = Array.from(designTypeDropdowns)
      .map((dropdown) => dropdown.value)
      .filter((value) => value && value !== "N/A"); // Exclude empty or "N/A" values

    // Check if a product box quantity is provided
    const productBoxQuantity = document.getElementById("box-quantity").value;

    // Generate "Order type" summary
    let orderType = "";
    if (productBoxQuantity > 0) {
      orderType += `${productBoxQuantity} product boxes, `;
    }

    // Exclude "product-box" from the designTypes when generating orderType
    const filteredDesignTypes = designTypes.filter((type) => type !== "product-box");
    orderType += filteredDesignTypes.join(", ");

    // Trim any trailing commas or spaces
    orderType = orderType.trim().replace(/,\s*$/, "");

    // Collect products into a list
    const products = formData.getAll("products[]");

    // Construct the payload with orderType first
    const payload = {
      orderType: orderType, // Add orderType at the top
      packageType: formData.get("packageType"),
      brand: formData.get("brand"),
      colorScheme: {
        primary: primaryColor,
        secondary: secondaryColor
      },
      slogan: formData.get("slogan"),
      links: formData.get("links"),
      extraInfo: formData.get("extraInfo"),
      selectedBanner: formData.get("selectedBanner"),
      selectedLogo: formData.get("selectedLogo"),
      products: products, // Add products as an array
    };

    // Output the formatted payload for debugging
    console.log("New Design Request:");
    console.log(`orderType: ${payload.orderType}`);
    console.log(`packageType: ${payload.packageType}`);
    console.log(`brand: ${payload.brand}`);
    console.log(`colorScheme: Primary - ${payload.colorScheme.primary}, Secondary - ${payload.colorScheme.secondary}`);
    console.log(`slogan: ${payload.slogan}`);
    console.log(`links: ${payload.links}`);
    console.log(`extraInfo: ${payload.extraInfo}`);
    console.log(`selectedBanner: ${payload.selectedBanner}`);
    console.log(`selectedLogo: ${payload.selectedLogo}`);
    console.log("products:");
    products.forEach((product, index) => {
      console.log(`  product ${index + 1}: ${product}`);
    });

    try {
      // Replace with your backend server URL
      const backendUrl = "https://gfx-ordfe2.art/send-message"; // Update <YOUR-VPS-IP>
      const response = await fetch(backendUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });

      if (response.ok) {
        alert("Form submitted successfully!");
      } else {
        const errorText = await response.text();
        alert(`Failed to submit the form: ${errorText}`);
      }
    } catch (error) {
      console.error("Error:", error);
      alert("An error occurred while submitting the form.");
    }
});
  </script>
</body>
</html>
